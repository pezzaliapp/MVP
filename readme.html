<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>README ‚Äî Preventivo PRO (PWA)</title>
  <style>
    :root{
      --bg:#0a1228; --ink:#e9f1ff; --muted:#9db0d0;
      --card:#0f1834; --line:#1a2655; --accent:#2dd36f;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    main{max-width:880px;margin:0 auto;padding:32px 20px}
    h1,h2,h3{font-weight:700}
    h1{font-size:22px;display:flex;align-items:center;gap:8px}
    h2{margin-top:28px;font-size:18px;color:var(--accent)}
    code,pre{background:#111a3c;color:#fff;padding:2px 6px;border-radius:6px;font-size:14px}
    pre{padding:12px;overflow:auto}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    ul{margin:8px 0 8px 20px}
    hr{border:none;border-top:1px solid var(--line);margin:32px 0}
    .note{font-size:14px;color:var(--muted)}
  </style>
</head>
<body>
<main>
  <h1>
    <img src="icons/icon-192.png" alt="Logo" width="32" height="32">
    Preventivo PRO ‚Äî Quoting & Margini (PWA)
  </h1>

  <p><strong>Preventivo PRO</strong> √® una Progressive Web App (PWA) per creare preventivi professionali <strong>direttamente dal browser</strong>.<br>
  Funziona <strong>offline</strong>, salva i dati in <strong>locale</strong> (LocalStorage) e non richiede alcun server.</p>

  <hr>

  <h2>Funzionalit√†</h2>
  <ul>
    <li><strong>Immagini per riga</strong> (thumbnail ridimensionate automaticamente per stampa/PDF).</li>
    <li><strong>Modalit√† prezzo</strong>:
      <ul>
        <li><em>Margine</em> ‚Üí calcolo da margine vero.</li>
        <li><em>Ricarico</em> ‚Üí calcolo da ricarico percentuale.</li>
      </ul>
    </li>
    <li><strong>Auto-prezzo</strong> ‚Üí calcola i prezzi per raggiungere un <em>target di margine medio</em> (post-sconto).</li>
    <li><strong>Doppia stampa</strong>:
      <ul>
        <li><em>Stampa Interna</em> ‚Üí con costi, ricavi e modalit√† prezzo.</li>
        <li><em>Stampa Cliente</em> ‚Üí senza costi, ricavi e modalit√† prezzo.</li>
      </ul>
    </li>
    <li><strong>Import CSV</strong> (schema dedicato, vedi sotto).</li>
    <li><strong>PWA installabile</strong> su desktop e mobile.</li>
    <li><strong>Omaggio</strong>: link rapido all‚Äôapp <em>Il Cubo</em>.</li>
  </ul>

  <hr>

  <h2>Omaggio ‚Äî Il Cubo</h2>
  <p>All‚Äôinterno dell‚Äôapp trovi il pulsante <strong>‚ÄúüéÅ Omaggio: Il Cubo‚Äù</strong> che apre l‚Äôapp dimostrativa
  <a href="https://www.alessandropezzali.it/KubeApp/" target="_blank">KubeApp (Il Cubo)</a>.</p>
  <p class="note">√à solo un omaggio: non influisce in alcun modo sul funzionamento di Preventivo PRO.</p>

  <hr>

  <h2>Stampa / PDF</h2>
  <ul>
    <li><strong>Stampa Interna</strong> ‚Üí include Modalit√† prezzo, Costi, Ricavi netti, Totali.</li>
    <li><strong>Stampa Cliente</strong> ‚Üí nasconde Modalit√† prezzo, Costi, Ricavi netti; mostra Prezzi, Sconti, Totali.</li>
  </ul>
  <p>Tecnicamente, prima della stampa viene generato HTML pulito dentro <code>#printView</code> e il CSS
  <code>@media print</code> mostra solo questa sezione.</p>
  <p><strong>Suggerimenti</strong>:
    <br>- Desktop: ‚ÄúStampa ‚Üí Salva come PDF‚Äù.
    <br>- Mobile: dalla finestra di stampa condividi/esporta PDF.
  </p>

  <hr>

  <h2>Import CSV</h2>
  <p>Il pulsante <em>Importa CSV</em> accetta file con separatore <code>,</code> o <code>;</code> e intestazione opzionale.<br>
  <strong>Ordine delle colonne:</strong></p>
  <pre>desc, cost, margin, price, qty, disc</pre>

  <p><strong>Significato colonne</strong></p>
  <ul>
    <li><code>desc</code> ‚Üí Descrizione voce</li>
    <li><code>cost</code> ‚Üí Costo unitario</li>
    <li><code>margin</code> ‚Üí Percentuale margine/ricarico (si interpreta in base alla modalit√† attiva)</li>
    <li><code>price</code> ‚Üí Prezzo netto unitario (se 0 o vuoto viene ricalcolato)</li>
    <li><code>qty</code> ‚Üí Quantit√†</li>
    <li><code>disc</code> ‚Üí Sconto % applicato alla riga</li>
  </ul>

  <p class="note">Le immagini non si importano via CSV (si caricano dalla UI per ogni riga).</p>

  <p><strong>Esempio:</strong></p>
  <pre>
desc,cost,margin,price,qty,disc
"Piattaforma sollevamento PFA50",1000,30,0,1,0
"Smontagomme FT26SN",1450,35,0,1,5
"Bilanciatrice MEC 200 Truck",2800,28,0,1,0
  </pre>

  <hr>

  <h2>Dati & Privacy</h2>
  <ul>
    <li>Tutti i dati sono salvati solo nel browser via LocalStorage.</li>
    <li>Nessun backend o invio a server esterni.</li>
  </ul>
  <p><strong>Chiavi LocalStorage utilizzate</strong></p>
  <ul>
    <li><code>preventivo.pro.v1</code> ‚Üí preventivo corrente (campi + righe)</li>
    <li><code>preventivo.pro.mode</code> ‚Üí modalit√† prezzo (margin/markup)</li>
    <li><code>preventivo.pro.layout</code> ‚Üí vista tabella/card</li>
    <li><code>preventivo.pro.donated</code> ‚Üí *storico legacy*, non pi√π usata</li>
  </ul>

  <hr>

  <h2>PWA</h2>
  <ol>
    <li>Apri l‚Äôapp nel browser</li>
    <li>Clicca <em>Aggiungi alla Home / Installa</em></li>
    <li>L‚Äôapp sar√† disponibile come icona e funzioner√† anche offline</li>
  </ol>

  <hr>

  <h2>Struttura</h2>
  <ul>
    <li><code>index.html</code> ‚Äî layout + stile + script di bootstrap</li>
    <li><code>app.js</code> ‚Äî logica: calcoli, CSV, stampa, immagini, link omaggio</li>
    <li><code>sw.js</code> ‚Äî service worker per cache offline</li>
    <li><code>manifest.webmanifest</code> ‚Äî manifest PWA</li>
    <li><code>icons/</code> ‚Äî icone app (192/512)</li>
  </ul>

  <hr>

  <h2>Troubleshooting</h2>
  <ul>
    <li><strong>Stampa vuota</strong> ‚Üí usa i pulsanti <em>Stampa Interna</em> o <em>Stampa Cliente</em>.</li>
    <li><strong>CSV non importato</strong> ‚Üí controlla separatore e ordine colonne.</li>
    <li><strong>PWA non installabile / aggiornamenti non visibili</strong> ‚Üí svuota cache e ricarica forzando:
      <br>- Windows/Linux: <code>Ctrl + Shift + R</code>
      <br>- macOS: <code>Cmd + Shift + R</code>
    </li>
  </ul>

  <hr>

  <h2>Licenza</h2>
  <p>Distribuito con <strong>licenza MIT</strong>. Vedi il file <a href="./LICENSE">LICENSE</a>.</p>

  <h3>Nota etica di utilizzo</h3>
  <ul>
    <li>Mantenere sempre la nota di copyright</li>
    <li>Citare l‚Äôautore originale: <strong>Alessandro Pezzali ‚Äî pezzaliAPP</strong></li>
    <li>Segnalare l‚Äôuso o le modifiche scrivendo a: <a href="mailto:info@alessandropezzali.it">info@alessandropezzali.it</a></li>
  </ul>
  <p class="note">Questa richiesta non modifica i termini della licenza MIT, ma rappresenta un impegno di trasparenza e collaborazione.</p>

</main>
</body>
</html>
